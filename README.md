# 📈 AI Stock Analysis & Report Generator (AI大模型量化研报工具)

这是一个自动化的A股选股、分析及内容生成工具。它结合了传统量化指标（KDJ, RSI, 均线）与AI大模型（Gemini/OpenAI），每日自动生成高质量的小红书复盘文案和专业的行情海报提示词。

## ✨ 核心特性 (v2.0 Update)

*   **🎯 严选 Top 10**：严格限制每日仅输出前10只最强信号个股，宁缺毋滥。
*   **🎨 动态吉利海报**：
    *   **风格**：专业手绘/建筑素描风 (Professional Architectural Sketch) + 喜庆红金渐变背景。
    *   **动态吉祥物**：AI根据当日**最火板块**自动生成吉祥物（如芯片拟人、火箭拟人、跑车拟人），告别千篇一律的机器人。
    *   **吉利元素**：卡片内仅保留单一核心吉利图标（🚀 火箭 / 🔥 火焰），拒绝下跌暗示。
*   **📝 深度小红书文案**：
    *   **排版**：强制“每股2行”格式（第1行信息，第2行核心理由），清晰易读。
    *   **全自动题材匹配**：自动补全缺失的行业/题材信息。
*   **🛡️ 专业术语**：统一使用“标准买点” (Standard Buy Point) 等专业表述。

## 🚀 快速开始

### 1. 执行选股与分析
运行主程序：
```bash
python run_ai_analysis.py
```
**脚本执行流程：**
1.  **数据获取**：拉取最新的A股日线数据。
2.  **量化选股**：根据策略（超卖反弹、回踩支撑等）筛选股票。
    -   *默认配置：并发100线程，仅测试前500只股票（可修改）。*
3.  **AI分析**：调用大模型分析 **Top 10** 股票的题材与技术面，并生成“动态吉祥物”方案。
4.  **内容生成**：
    -   生成 **小红书文案** (`results/YYYYMMDD/xiaohongshu_*.txt`)
    -   生成 **图片提示词** (`results/YYYYMMDD/image_prompt_*.txt`)

### 2. 生成海报图片 (必须步骤)
**⚠️ 注意：脚本仅生成提示词文件，需要您配合绘图工具使用。**

1.  打开生成的提示词文件：`results/YYYYMMDD/image_prompt_YYYYMMDD_*.txt`
2.  **操作**：
    -   复制文件中的完整英文 Prompt。
    -   发送给 **AI绘图工具** (推荐模型: Nano Banana Pro3 / DALL-E 3 / Midjourney v6)。
    -   **检查**：确认生成的图片包含“动态吉祥物”（如芯片人/火箭人）及“红金喜庆背景”。

---

## 📂 输出文件说明
所有结果保存在 `results/YYYYMMDD/` 目录下：

| 文件名 | 说明 | 用途 |
| :--- | :--- | :--- |
| `xiaohongshu_*.txt` | **小红书文案** | **核心产出**，Emoji风格 + 2行排版，直接复制发布。 |
| `image_prompt_*.txt` | **图片提示词** | **核心产出**，包含动态吉祥物、吉利图标、垂直9:16布局指令。 |
| `ai_analysis_*.md` | AI分析报告 | 详细的逻辑分析与板块点评（Markdown格式）。 |
| `selected_*.json` | 原始选股结果 | 数据备份/调试。 |
| `stock_list_summary_*.txt` | 私信汇总列表 | 包含股票代码及规则，适合私信回复用户。 |

## ⚙️ 配置与维护
编辑 `run_ai_analysis.py` 文件头部进行配置：

- **`MAX_WORKERS`**: 并发线程数（默认100）。
- **`MIN_MARKET_CAP`**: 最小市值过滤（单位：亿）。
- **API Key**: 目前在代码中配置。**建议**：生产环境请使用 `k = os.getenv("API_KEY")` 替代硬编码。
- **全市场扫描**：
  注释掉以下代码以扫描全市场：
  ```python
  # stock_list = stock_list.head(500)
  ```

## 📝 常见问题
*   **Q: 为什么生成的图片里没有K线图？**
    *   A: 设计如此。我们用“吉利图标” (🚀/🔥) 替代了复杂的K线，为了海报更简洁喜庆。
*   **Q: 只有10只股票？**
    *   A: 是的，策略严格限制 Top 10，确保只关注最强标的。
